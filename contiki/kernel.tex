%=========================================================================
% (c) 2011, 2012 Josef Lusticky <xlusti00@stud.fit.vutbr.cz>

\section{The kernel}
The kernel in Contiki is event-driven but the system supports preemptive
multi-threading that can be applied on a per-process basis~\cite{video}.
The preemption is not implemented in the kernel, but
preemptive multi-threading is implemented as a library that is linked only with programs that
explicitly require multi-threading~\cite{paper-contiki}.
The kernel itself contains no platform specific code, it implements only CPU multiplexing and
lets device drivers and applications communicate directly with hardware~\cite{video}.

%! todo - process
Applications in Contiki OS are run as processes.
Every Contiki process consists of a process control block and a process thread~\cite{contiki-wiki-processes}.
The process control block contains run-time information about the process -
textual name of the process, pointer to the process thread and state of the process.
The process thread contains the code of the process and is stored in read only memory~\cite{contiki-wiki-processes}.
The process thread is implemented as a protothread.
%% continue here
In Contiki, code run in either of two execution contexts:
cooperative, in which code never preempts other code, and preemptive,
which preempts the execution of the cooperative code and returns control
when the preemptive code is finished.
Processes always run in cooperative mode, where as interrupts run in preemptive mode.
The only process control function that can be called from preemptive mode is process\_poll(). 
Processes communicate with each other by posting events to each other.
Events are also posted when a process starts and exits.
% https://www.sics.se/contiki/wiki/index.php/Processes
%! todo - process

The Contiki kernel does not provide support for timed events,
instead an application that wants to use timers needs to explicitly use the timer library~\cite{contiki-docs}.
The Contiki timer library is further discussed in section~\ref{sec:contiki-timers}.

As stated before, Contiki is well documented and you can find out more about
the kernel as well as the system in the documentation~\cite{contiki-docs}.
