#Hardware:
avr raven with atmega1284p and lcd displey
avr dragon programator - JTAG connected to avr raven


Software:
avrdude (flasher) - http://www.nongnu.org/avrdude/
avr-libc, binutils-avr, gcc-avr, (gdb-avr, avarice)
/etc/udev/rules.d/99-avrdragon.rules
SUBSYSTEMS=="usb", ATTRS{idVendor}=="03eb", ATTRS{idProduct}=="2107", MODE="0666"

git clone

cd contiki/examples/hello-world
make TARGET=avr-raven savetarget
make
make hello-world.u # naflashuje program do avr ravenu
make hello-world.hex  # extrahuje hex soubor -- viz http://www.sics.se/contiki/wiki/index.php/Avr_Raven


make targets # zobrazi cile


dolu do makefile
AVRDUDE_PROGRAMMER := -c dragon_jtag

-nahoru pro ladeni
-CFLAGS += -g -DDEBUG=1

ladeni:
avarice -g -j usb -P atmega1284p --erase --program --file hello-world.hex -B 1MHz  :1212

avr-gdb hello-wolrd.avr-raven
layout asm
target remote :1212
continue

ddd --debugger avr-gdb hello-world.avr-raven

pomoci RZUSBSTICK (rzusbstick + contiki/example/ravenusbstick = jackdaw):
ve skupine dialout
screen /dev/ttyACM0



webserver
------------

cd ~/contiki/examples/webserver-ipv6-raven
make

sudo ip -6 address add aaaa::1/64 dev usb0
sudo ip -6 route add aaaa::/64 dev usb0
sysctl -w net.ipv6.conf.all.forwarding=1

radvd.conf
radvd start


avr-objcopy -R .eeprom -R .fuse -R .signature -O ihex webserver6-avr-raven.elf webserver6-avr-raven.flash
avr-objcopy -j .eeprom --set-section-flags=.eeprom="alloc,load" --change-section-lma .eeprom=0 -O ihex webserver6-avr-raven.elf webserver6-avr-raven.eeprom

avrdude -c dragon_jtag -P usb -p m1284p -Ueeprom:w:webserver6-avr-raven.eeprom -Uflash:w:webserver6-avr-raven.flash
# /etc/avrdude.conf

ping6 aaaa::0011:22ff:fe33:4455
